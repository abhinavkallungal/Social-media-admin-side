(this["webpackJsonpsocial-media-admin"]=this["webpackJsonpsocial-media-admin"]||[]).push([[0],{202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(42),s=n.n(r),i=(n(202),n(46)),o=(n(203),n(8)),l=n(21),d=n(153),j=n(3),u=n(35),b=(n(204),n(108)),h=n(89),m=n(126),O=n(71),x=n(19),p=n.n(x),f=n(61),v=n(62),g=n.n(v),w="https://socialmediaserver.kallungal.tech",y=n(2);var k=function(){var e=Object(l.g)(),t=Object(a.useState)({email:null,password:null}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)({error:!1,message:null}),i=Object(o.a)(s,2),d=i[0],x=i[1],v=function(e){r(Object(u.a)(Object(u.a)({},c),{},Object(j.a)({},e.target.name,e.target.value)))};return Object(y.jsx)("div",{className:"loginpage",children:Object(y.jsx)("div",{className:"row",children:Object(y.jsx)("div",{className:"col-lg-4",children:Object(y.jsxs)("div",{className:"card shadow p-5",children:[Object(y.jsx)(b.a,{variant:"h4",className:"text-center",style:{fontWeight:"bold"},children:" ADMIN LOGIN "}),Object(y.jsx)(h.a,{className:"mt-4",children:Object(y.jsx)(m.a,{id:"outlined-basic",onChange:v,label:"Email",name:"email",type:"email",required:!0,variant:"outlined"})}),Object(y.jsx)(h.a,{className:"mt-4",children:Object(y.jsx)(m.a,{id:"outlined-basic",onChange:v,label:"Password",name:"password",type:"password",required:!0,variant:"outlined"})}),d.error&&Object(y.jsx)("span",{style:{color:"red"},children:d.message}),Object(y.jsx)(O.a,{variant:"contained",className:"mt-4",onClick:function(){console.log(c);var t;""===c.email?x({error:!0,message:"Email Is Requerd"}):/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(c.email)?""===c.password?x({error:!0,message:"Password Is Requerd"}):(t=c,new Promise(function(){var e=Object(f.a)(p.a.mark((function e(n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),g.a.post(w+"/api/v1/admin/login",t).then((function(e){localStorage.setItem("token",e.data.token),console.log(e.data),localStorage.setItem("admin",JSON.stringify(e.data.admin)),n(e)})).catch((function(e){console.log("err",e),a(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then((function(t){e.push("/")})).catch((function(e){x({error:!0,message:e.response.data.message})})):x({error:!0,message:"invalid Email format "})},children:"LOGIN"})]})})})})},N=n(331),S=n(330),I=n(317),B=n(315),A=n(325),C=n(72),D=n(123),P=n.n(D),z=n(328),U=n(323),M=n(171),E=n(316),_=n(103),F=n.n(_),L=n(160),R=n.n(L),W=n(329),q=240;var T=function(e){var t=e.window,n=a.useState(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],l=function(){s(!r)},d=Object(y.jsxs)("div",{children:[Object(y.jsx)(W.a,{}),Object(y.jsx)(B.a,{}),Object(y.jsxs)(z.a,{children:[Object(y.jsx)(i.b,{to:"/",style:{textDecoration:"none",color:"#757575"},children:Object(y.jsxs)(U.a,{button:!0,children:[Object(y.jsx)(M.a,{children:Object(y.jsx)(P.a,{})}),Object(y.jsx)(E.a,{primary:"Dashboard"})]})}),Object(y.jsx)(i.b,{to:"/addBanner",style:{textDecoration:"none",color:"#757575"},children:Object(y.jsxs)(U.a,{button:!0,children:[Object(y.jsx)(M.a,{children:Object(y.jsx)(P.a,{})}),Object(y.jsx)(E.a,{primary:"addbanner"})]})}),Object(y.jsx)(i.b,{to:"/banner",style:{textDecoration:"none",color:"#757575"},children:Object(y.jsxs)(U.a,{button:!0,children:[Object(y.jsxs)(M.a,{children:[" ",Object(y.jsx)(F.a,{})]}),Object(y.jsx)(E.a,{primary:"Banner Management"})]})})]}),Object(y.jsx)(B.a,{})]}),j=void 0!==t?function(){return t().document.body}:void 0;return Object(y.jsxs)(S.a,{sx:{display:"flex"},children:[Object(y.jsx)(I.a,{}),Object(y.jsx)(N.a,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(q,"px)")},ml:{sm:"".concat(q,"px")}},children:Object(y.jsxs)(W.a,{children:[Object(y.jsx)(C.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,sx:{mr:2,display:{sm:"none"}},children:Object(y.jsx)(R.a,{})}),Object(y.jsx)(b.a,{variant:"h6",noWrap:!0,component:"div",children:"Admin Pannel"})]})}),Object(y.jsxs)(S.a,{component:"nav",sx:{width:{sm:q},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[Object(y.jsx)(A.a,{container:j,variant:"temporary",open:r,onClose:l,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:q}},children:d}),Object(y.jsx)(A.a,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:q}},open:!0,children:d})]}),Object(y.jsxs)(S.a,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(q,"px)")}},children:[Object(y.jsx)(W.a,{}),e.children]})]})},G=n(161),J=n(249),Y=n(318),Z=n(124),V=n.n(Z);n(239);var $=function(){var e=Object(l.g)(),t=[{field:"id",headerName:"ID",width:200},{field:"name",headerName:"First Name",width:180},{field:"username",headerName:"User Name",width:180},{field:"isActive",headerName:"Active Status",width:180},{field:"Block",headerName:"Block / Unblock",sortable:!1,width:180,renderCell:function(t){return Object(y.jsx)(J.a,{checked:!t.row.isActive,onChange:function(n){var a;(a={userId:t.row.id,status:!t.row.isActive},new Promise(function(){var e=Object(f.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=localStorage.getItem("token"),g.a.patch(w+"/api/v1/admin/editUser",a,{headers:{Authorization:c}}).then((function(e){console.log(e.data.users),t(e)})).catch((function(e){n(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then((function(e){var t=e.data.users.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e._id})}));s(t)})).catch((function(t){403==t.response.status&&(localStorage.removeItem("token"),e.push("/login"))}))},name:"loading",color:"primary"})}},{field:"action",headerName:"Action",sortable:!1,renderCell:function(t){return Object(y.jsx)(C.a,{onClick:function(n){n.stopPropagation(),V.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){var a;n.isConfirmed&&(a=t.row._id,new Promise(function(){var e=Object(f.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=localStorage.getItem("token"),g.a.patch(w+"/api/v1/admin/deleteUser",{userId:a},{headers:{Authorization:c}}).then((function(e){console.log(e.data.users),t(e)})).catch((function(e){n(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then((function(e){console.log(e);var t=e.data.users.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e._id})}));s(t),V.a.fire("Deleted!","Your file has been deleted.","success")})).catch((function(t){403==t.response.status&&(localStorage.removeItem("token"),e.push("/login"))}))})),console.log(t)},style:{backgroundColor:"#1976d2"},children:Object(y.jsx)(Y.a,{style:{color:"red"}})})}}],n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){new Promise(function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=localStorage.getItem("token"),g.a.get(w+"/api/v1/admin/getAllUsers",{headers:{Authorization:a}}).then((function(e){t(e)})).catch((function(e){n(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){var t=e.data.users.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{id:e._id})}));console.log(t),s(t)})).catch((function(t){403==t.response.status&&(localStorage.removeItem("token"),e.push("/login"))}))}),[]),Object(y.jsxs)("div",{className:"ViewUser card p-4",children:[Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("h3",{children:"Users"}),Object(y.jsx)(O.a,{variant:"contained",children:"Add User"})]}),Object(y.jsx)("div",{style:{height:400,width:"100%"},children:Object(y.jsx)(G.a,{rows:r,columns:t,pageSize:5,rowsPerPageOptions:[5],pagination:!0,dense:!0})})]})};var H=function(){return Object(y.jsx)("div",{children:Object(y.jsx)(T,{children:Object(y.jsx)($,{})})})},K=n(107),Q=n(48);n(241);var X=function(){var e=Object(l.g)(),t=Object(a.useState)({days:5}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(o.a)(s,2),d=i[0],b=i[1],x=Object(a.useState)(""),v=Object(o.a)(x,2),k=v[0],N=v[1],S=Object(a.useState)({}),I=Object(o.a)(S,2),B=(I[0],I[1],function(e){r((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))});return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"card p-4",children:[Object(y.jsx)("h4",{children:"  Banner Management "}),Object(y.jsxs)("div",{className:"row  align-items-center",children:[Object(y.jsxs)("div",{className:"col-lg-6",children:[Object(y.jsx)(m.a,{variant:"outlined",label:"description",inputProps:{maxLength:40},name:"description",fullWidth:!0,value:c.description,onChange:B,className:"mt-4"}),Object(y.jsx)(h.a,{variant:"outlined",fullWidth:!0,style:{border:"1px solid #c4c4c4",borderRadius:"3px",padding:"13px",marginTop:"30px"},children:Object(y.jsx)("input",{type:"file",name:"files",multiple:!1,value:c.files,id:"",onChange:function(e){0!==e.target.files.length?(N(URL.createObjectURL(e.target.files[0])),b(e.target.files),r((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))):(N(""),b([]))},accept:"image/*"})}),Object(y.jsx)(h.a,{fullWidth:!0,className:"mt-4",children:Object(y.jsxs)(K.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Days",name:"days",onChange:B,children:[Object(y.jsx)(Q.a,{value:5,children:"5 Days"}),Object(y.jsx)(Q.a,{value:10,children:"10 Days"}),Object(y.jsx)(Q.a,{value:15,children:"15 Days"})]})}),Object(y.jsx)(O.a,{className:"mt-3",variant:"outlined",onClick:function(){var t=new FormData,n=!0;if(c.days?t.append("days",c.days):n=!1,c.description?t.append("description",c.description):n=!1,d.length>0)for(var a=0;a<d.length;a++)t.append("files",d[a]);else n=!1;n&&function(e){return new Promise(function(){var t=Object(f.a)(p.a.mark((function t(n,a){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=localStorage.getItem("token"),g.a.post(w+"/api/v1/admin/addBanner",e,{headers:{Authorization:c,"Content-Type":"multipart/form-data"}}).then((function(e){n(e.data)})).catch((function(e){a(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(t).then((function(){e.push("/banner"),r({days:5,description:""}),N(""),b([])}))},children:"Add Banner"})]}),Object(y.jsx)("div",{className:"col-lg-5",children:k&&Object(y.jsx)("div",{className:"SidebarBanner",children:Object(y.jsxs)("div",{className:"banner",children:[Object(y.jsx)("img",{src:k,alt:""}),Object(y.jsx)("span",{children:c.description})]})})})]})]})})},ee=n(319),te=n(321);var ne=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){new Promise(function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=localStorage.getItem("token"),g.a.get(w+"/api/v1/admin/getAllBanners",{headers:{Authorization:a}}).then((function(e){t(e)})).catch((function(e){n(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){console.log(e),c(e.data.Banner)})).catch((function(e){}))}),[]);var r=function(e){(function(e){return new Promise(function(){var t=Object(f.a)(p.a.mark((function t(n,a){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=localStorage.getItem("token"),g.a.get(w+"/api/v1/admin/deleteBanner/"+e,{headers:{Authorization:c}}).then((function(e){console.log(e.data),n(e)})).catch((function(e){a(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})(e).then((function(e){c(e.data.Banner)}))};return Object(y.jsxs)("div",{className:"Banners",children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between p-3",children:[Object(y.jsx)(ee.a,{variant:"h4",children:"Banner Management"}),Object(y.jsx)(i.b,{style:{textDecoration:"none"},to:"/addBanner",children:Object(y.jsx)(te.a,{variant:"contained",style:{color:"#000",backgroundColor:"#0FFF5070"},children:"Add Banner"})})]}),Object(y.jsx)("div",{className:"card  p-2",children:n?n.map((function(e,t){return Object(y.jsxs)("div",{className:" col-lg-4 SidebarBanner",children:[Object(y.jsxs)("div",{className:"banner",children:[Object(y.jsx)("img",{src:e.files[0],alt:""}),Object(y.jsx)("span",{children:e.description})]}),Object(y.jsx)(te.a,{onClick:function(){return r(e._id)},style:{textDecoration:"none",color:"red"},children:" Delete "})]},t)})):null})]})};var ae=function(){return Object(y.jsx)("div",{className:"banner",children:Object(y.jsx)(T,{children:Object(y.jsx)(ne,{})})})};var ce=function(){return Object(y.jsx)("div",{className:"banner",children:Object(y.jsx)(T,{children:Object(y.jsx)(X,{})})})};var re=function(){var e=Object(l.g)(),t=Object(l.h)(),n=Object(a.useState)(""),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)({}),j=Object(o.a)(i,2),u=(j[0],j[1]);Object(a.useEffect)((function(){if(s(localStorage.getItem("token")),u(localStorage.getItem("user")),r){var e=Object(d.a)(r);1e3*e.exp<(new Date).getTime()&&b(),console.log(e)}s(localStorage.getItem("token"))}),[t]);var b=function(){console.log("logout"),localStorage.removeItem("token"),s(null),e.push("/login")};return Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/",children:r?Object(y.jsx)(H,{}):Object(y.jsx)(l.a,{to:"/login"})}),Object(y.jsx)(l.b,{exact:!0,path:"/login",children:r?Object(y.jsx)(l.a,{to:"/"}):Object(y.jsx)(k,{})}),Object(y.jsx)(l.b,{exact:!0,path:"/Banner",children:Object(y.jsx)(ae,{})}),Object(y.jsx)(l.b,{exact:!0,path:"/addBanner",children:r?Object(y.jsx)(ce,{}):Object(y.jsx)(l.a,{to:"/login"})})]})};var se=function(){return Object(y.jsx)(i.a,{children:Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(re,{})})})};s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(se,{})}),document.getElementById("root"))}},[[242,1,2]]]);
//# sourceMappingURL=main.06740182.chunk.js.map